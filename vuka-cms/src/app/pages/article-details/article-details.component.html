<div class="details-container">
  <div class="actions-container">
    <a mat-flat-button routerLink="/articles" class="back-button">
      <mat-icon>arrow_back</mat-icon>
      <span>Back to Articles</span>
    </a>
    <button mat-flat-button color="primary" (click)="goToEdit()">
      <mat-icon>edit</mat-icon>
      <span>Edit Article</span>
    </button>
  </div>

  @if (isLoading) {
    <div class="spinner-container">
      <mat-progress-spinner
        color="primary"
        mode="indeterminate"
      ></mat-progress-spinner>
    </div>
  }

  @if (!isLoading && article) {
    <div>
      <mat-card class="article-card">
        <mat-card-header>
          <mat-card-title>
            <a
              [href]="article.originalUrl"
              target="_blank"
              rel="noopener noreferrer"
              >{{ article.title }}</a
            >
          </mat-card-title>
          <mat-card-subtitle>
            <span>{{ article.source.name }}</span>
            <span class="separator">|</span>
            <span>{{ article.publishedAt | date: "longDate" }}</span>
          </mat-card-subtitle>
        </mat-card-header>
        <div class="category-chips">
          @for (category of article.categories; track category) {
            <mat-chip>{{ category.name }}</mat-chip>
          }
        </div>
        <img mat-card-image [src]="mainImageUrl" alt="Main article image" />
        <mat-card-content>
          <div [innerHTML]="article.summary"></div>
        </mat-card-content>
        <mat-card-actions>
          <button mat-button (click)="openContentDialog()">
            Read Full Article
          </button>
        </mat-card-actions>
      </mat-card>
    </div>
  }
</div>
